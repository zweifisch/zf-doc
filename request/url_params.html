<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="../assets/style.css" />
	<link rel="stylesheet" href="../assets/github.css" />
</head>
<body>

	<div class="container">
		<div class="navigation-menu">

			<ul class="menu-root">
										<li class="navigation-menu-folder">
					<a class=""
						href="../getting_started.html">Getting Started</a></li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../routing/routing.html">Routing</a>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../routing/routing.html">Routing</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../routing/rest.html">REST</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../routing/rpc.html">RPC</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../request/url_params.html">Request</a>
											<li class="navigation-menu-article"  >
							<a class="current"
								href="../request/url_params.html">URL Params</a>
						</li>
											<li class="navigation-menu-article"  >
							<a class=""
								href="../request/validation.html">Validation</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../response/response.html">Response</a>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../response/response.html">Response</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../response/rendering_template.html">Rendering Template</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../response/miscs.html">Miscs</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../event.html">Event</a></li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../component.html">Component</a></li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../middleware.html">Middleware</a></li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../helper.html">Helper</a></li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../config.html">Config</a></li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../session/session.html">Session</a>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../session/session.html">Session</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../session/user.html">User</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../commandline/routing.html">Commandline</a>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../commandline/routing.html">Routing</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../commandline/signal.html">Signal</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../commandline/miscs.html">Miscs</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../commandline/phar_distribution.html">Phar Distribution</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../laziness.html">Laziness</a></li>
													<li class="navigation-menu-folder">
					<ul>
												<a href="../database/mongodb.html">Database</a>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../database/mongodb.html">Mongodb</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../database/pdo.html">PDO</a>
						</li>
											<li class="navigation-menu-article" style="display:none" >
							<a class=""
								href="../database/redis.html">Redis</a>
						</li>
										</ul>
				</li>
													<li class="navigation-menu-folder">
					<a class=""
						href="../logging.html">Logging</a></li>
									</ul>

			<ul class="menu-links">
								<li>
					<a href="http://zweifisch.github.io/zf-doc/">Home</a>
				</li>
								<li>
					<a href="https://github.com/zweifisch/zf">GitHub Repo</a>
				</li>
							</ul>

		</div>
		<div class="main-content">
						<h1>Request: URL Params</h1>
						<p>getting params from url</p>

<pre><code class="language-php">$app-&gt;get('products/:id', function($id) {
    $id == $this-&gt;params-&gt;id;  // true
});
</code></pre>

<p>optional params</p>

<pre><code class="language-php">$app-&gt;get('products/:id?', function() {
    if($this-&gt;params-&gt;id){
        // show product by id
    } else {
        // $this-&gt;params-&gt;id is null, list all products
    }
});
</code></pre>

<h2>accessing params in query string</h2>

<p><code>/products?limit=20&amp;offset=20&amp;c=1</code></p>

<pre><code class="language-php">$app-&gt;get('products', function($c, $limit=10, $offset=0) {
    // if $c is not set, 404 will be returned
});
</code></pre>

<h2>preprocessing of params</h2>

<p>register a param handler</p>

<pre><code class="language-php">$app-&gt;param('ids', function($value) {
    return explode(',', $value);
});
</code></pre>

<p>when params get accessed, the registered handler will be called</p>

<pre><code class="language-php">$app-&gt;get('products/:ids', function($ids) {
    // ids should be [1,2,3] if request path is 'products/1,2,3'
});

$app-&gt;get('users/:ids', function() {
    // handler won't get called if $this-&gt;params-&gt;ids is not accessed
});
</code></pre>

<p>usecase: preloading data</p>

<pre><code class="language-php">$app-&gt;param('product_id', function($id) {
    $this-&gt;product = function() use ($id) {
        return $this-&gt;db-&gt;findOne(['_id' =&gt; $id]);
    };
});

$app-&gt;get('product/:product_id', function($product_id) {
    return $this-&gt;product ? $this-&gt;product : 404;
});
</code></pre>

<p><code>$product_id</code> must be put in the handler's arguments list or be accessed using <code>$this-&gt;params-&gt;product_id</code> otherwise the param handler above won't be called; also note that <code>$this-&gt;product</code> won't be evaluated until it's accessed</p>
		</div>
	</div>

	<script type="text/javascript" src="../assets/highlight.js"></script>
	<script type="text/javascript">hljs.initHighlightingOnLoad()</script>
</body>
</html>
